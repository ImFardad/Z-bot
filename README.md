# 🤖 Z-Bot: ربات بقا در آخرالزمان زامبی (Node.js)

این پروژه یک ربات تلگرام است که با استفاده از Node.js، کتابخانه `node-telegram-bot-api` و مدل هوش مصنوعی Gemini گوگل ساخته شده است. ربات، کاربران را در سناریوهای واقع‌گرایانه بقا در دنیای زامبی‌زده قرار می‌دهد و راه حل‌های آن‌ها را بر اساس خلاقیت، کارآمدی و دیگر مهارت‌های بقا ارزیابی می‌کند. همچنین دارای سیستم‌های اقتصادی و مدیریتی مانند "پناهگاه"، "فروشگاه" و "کوله پشتی" است.

---

## قابلیت‌ها

- **🧟 سناریوهای بقا:** تولید سناریوهای چالش‌برانگیز و واقع‌گرایانه با استفاده از Gemini AI.
- **🧠 ارزیابی هوشمند:** تحلیل و امتیازدهی به راه حل‌های کاربران بر اساس معیارهای مختلف بقا.
- **🏕️ سیستم پناهگاه:**
  - ایجاد پناهگاه در گروه‌های تلگرام از طریق یک فرآیند چندمرحله‌ای.
  - **مکان‌یابی هوشمند:** پیدا کردن یک مکان دقیق و منحصر به فرد برای پناهگاه با استفاده از هوش مصنوعی.
  - نمایش اطلاعات کامل پناهگاه و امکان عضویت و خروج از آن.
- **💰 اقتصاد داخلی:**
    - هر بازمانده با مقدار اولیه‌ای سکه بازی را شروع می‌کند.
    - **فروشگاه:** یک منوی داخلی برای خرید و ارتقای تجهیزات.
    - **کوله پشتی:** سیستمی برای مدیریت آیتم‌ها با ظرفیت محدود و قابل ارتقا.
- **📊 درصد بقا:** هر کاربر یک "درصد بقا" دارد که بر اساس عملکرد او در سناریو‌ها آپدیت می‌شود.
- **🛡️ کنترل دسترسی و پایداری:** دارای مکانیزم‌های کنترل دسترسی و مدیریت خطا برای تضمین پایداری ربات.

---

## ساختار پروژه

```
z-bot/
│
├── db/
│   ├── database.js         # تنظیمات اتصال به دیتابیس (Sequelize)
│   ├── User.js             # مدل کاربر (User)
│   ├── Shelter.js          # مدل پناهگاه (Shelter)
│   ├── ShopItem.js         # مدل آیتم‌های فروشگاه
│   └── UserQuestionHistory.js # مدل تاریخچه سناریوهای کاربر
│
├── handlers/
│   ├── backpackHandler.js  # مدیریت منوی کوله پشتی
│   ├── menuHandler.js      # مدیریت دکمه‌های منوی اصلی
│   ├── shelterCreationHandler.js # مدیریت فرآیند ساخت پناهگاه
│   ├── shelterHandler.js   # مدیریت منوی پناهگاه در چت خصوصی
│   ├── shopHandler.js      # مدیریت فروشگاه و خرید
│   ├── startHandler.js     # مدیریت دستور /start
│   └── zombieHandler.js    # مدیریت سناریوهای زامبی
│
├── ... (سایر پوشه‌ها)
│
├── bot.js                  # منطق اصلی و راه‌اندازی ربات
├── index.js                # نقطه شروع برنامه
└── package.json
```

---

## راه‌اندازی و نصب

(مراحل نصب و پیکربندی مانند قبل باقی می‌ماند)

---

## نحوه استفاده

### دستورات اصلی

- `/start`:
  - **در چت خصوصی:** ربات را استارت کرده، شما را در سیستم ثبت می‌کند و منوی اصلی را نمایش می‌دهد.
  - **در گروه:** به شما یادآوری می‌کند که برای استفاده از ربات باید آن را در چت خصوصی استارت کرده باشید.
- `/shelter`:
  - **(فقط در گروه)** فرآیند ساخت پناهگاه جدید را آغاز می‌کند یا اطلاعات پناهگاه موجود را نمایش می‌دهد.

### منوی اصلی (در چت خصوصی)

- **🧟 سناریو زامبی:** یک سناریوی جدید برای حل کردن دریافت می‌کنید.
- **🏕️ پناهگاه:** وضعیت عضویت و اطلاعات پناهگاه خود را مشاهده می‌کنید.
- **🛒 فروشگاه:** برای خرید یا ارتقای تجهیزات وارد فروشگاه می‌شوید.
- **🎒 کوله پشتی:** (در صورت داشتن) محتویات و ظرفیت کوله پشتی خود را مشاهده می‌کنید.
- **🏆 احتمال بقا:** درصد بقای کلی شما را نمایش می‌دهد.

---

## اجرای ربات

برای اجرای ربات:

```sh
npm start
```

برای اجرای ربات در حالت توسعه:

```sh
npm run dev
```